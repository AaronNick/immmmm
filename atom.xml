<?xml version="1.0" encoding="utf-8"?> 
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="zh-CN">
    <generator uri="https://gohugo.io/" version="0.68.3">Hugo</generator><title type="html"><![CDATA[首页 on 木木木木木]]></title>
    
    
    
            <link href="https://immmmm.com/atom.xml" rel="self" type="application/rss+xml" title="atom" />
            <link href="https://immmmm.com/" rel="alternate" type="text/html" title="HTML" />
            <link href="https://immmmm.com/index.json" rel="alternate" type="application/json" title="JSON" />
    <updated>2020-04-10T13:35:14+00:00</updated>
    
    
    
    
        <id>https://immmmm.com/atom.xml</id>
    
        
        <entry>
            <title type="html"><![CDATA[Hugo 显示指定文件夹内图片]]></title>
            <link href="https://immmmm.com/hugo-readdir-photos-single/" rel="alternate" type="text/html" />
            
                <link href="https://immmmm.com/hugo-total-count/" rel="related" type="text/html" title="Hugo 总文章数和总字数" />
                <link href="https://immmmm.com/hugo-shortcodes-music/" rel="related" type="text/html" title="Hugo 音乐短代码" />
                <link href="https://immmmm.com/hugo-readdir-photos/" rel="related" type="text/html" title="Hugo 添加相册页面" />
                <link href="https://immmmm.com/hugo-shortcodes-article-link/" rel="related" type="text/html" title="Hugo 文章内链优化显示" />
                <link href="https://immmmm.com/use-visual-studio-code/" rel="related" type="text/html" title="VS Code 初体验" />
            
                <id>https://immmmm.com/hugo-readdir-photos-single/</id>
            
            
            <published>2020-04-10T20:38:16+08:00</published>
            <updated>2020-04-10T20:38:16+08:00</updated>
            
            
            <content type="html"><![CDATA[<p>效果见文章底部，这些图片非手动一张张插入，文章头部一句 <code>path: 2004gd</code> 搞定！</p>
<p>直接看代码：</p>
<pre><code>{{ if .Params.path }}
    {{$Path := .Params.path}}
    {{- range (readDir (printf &quot;%s%s&quot; &quot;./static/images/&quot; $Path )) -}}&lt;img loading='lazy' src=&quot;{{(printf &quot;/images/%s/%s&quot; $Path .Name ) | absURL}}&quot; /&gt;{{- end -}}
{{ end }}
</code></pre><p>当文章中写了 <code>path: 2004gd</code> 表示 Hugo 遍历根目录 <code>/static/images/2004gd</code> 内的图片并显示。</p>
<p>这功能其实之前 Bitcron 的主题里就有，太符合老年人的需求了，一句话，一堆图片，一篇文章搞定！</p>
<p>当然，如果使用 Github 托管，随手羊毛撸起，<code>lmm214/immmmm@gh-pages</code> 需自行更改：</p>
<pre><code>{{ if .Params.path }}
    {{$Path := .Params.path}}
    &lt;photos&gt;{{- range (readDir (printf &quot;%s%s&quot; &quot;./static/images/&quot; $Path )) -}}&lt;img loading='lazy' src=&quot;{{(printf &quot;https://cdn.jsdelivr.net/gh/lmm214/immmmm@gh-pages/images/%s/%s&quot; $Path .Name ) | absURL}}&quot; /&gt;{{- end -}}&lt;/photos&gt;
{{ end }}
</code></pre>]]></content>
            
                 
                    
                 
                    
                         
                        
                            
                             
                                <category scheme="https://immmmm.com/tags/%E6%8A%98%E8%85%BE" term="%E6%8A%98%E8%85%BE" label="折腾" />
                            
                        
                    
                
            
        </entry>
    
        
        <entry>
            <title type="html"><![CDATA[Hugo 总文章数和总字数]]></title>
            <link href="https://immmmm.com/hugo-total-count/" rel="alternate" type="text/html" />
            
                <link href="https://immmmm.com/hugo-shortcodes-music/" rel="related" type="text/html" title="Hugo 音乐短代码" />
                <link href="https://immmmm.com/hugo-readdir-photos/" rel="related" type="text/html" title="Hugo 添加相册页面" />
                <link href="https://immmmm.com/hugo-shortcodes-article-link/" rel="related" type="text/html" title="Hugo 文章内链优化显示" />
                <link href="https://immmmm.com/use-visual-studio-code/" rel="related" type="text/html" title="VS Code 初体验" />
                <link href="https://immmmm.com/hugo-template-code/" rel="related" type="text/html" title="Hugo 主题常用的代码片段" />
            
                <id>https://immmmm.com/hugo-total-count/</id>
            
            
            <published>2020-04-10T14:46:43+08:00</published>
            <updated>2020-04-10T14:46:43+08:00</updated>
            
            
            <content type="html"><![CDATA[<p>前者在某个大神主题中翻到，一句代码：</p>
<pre><code>共 {{ len (where .Site.RegularPages &quot;Section&quot; &quot;posts&quot;) }} 篇文章
</code></pre><p>总字数没有现成参数，官方手册看到 <a href="https://gohugo.io/functions/scratch/">.Scratch.Add</a> 瞎折腾完成:</p>
<pre><code>{{$scratch := newScratch}}
{{ range (where .Site.Pages &quot;Kind&quot; &quot;page&quot; )}}
    {{$scratch.Add &quot;total&quot; .WordCount}}
{{ end }}
</code></pre><p>新建了个参数累加所有文章的 <code>.WordCount</code> 字数，一般放 footer 头几行，下面是调用代码：</p>
<pre><code>总计 {{$scratch.Get &quot;total&quot; }} 字
</code></pre>]]></content>
            
                 
                    
                 
                    
                         
                        
                            
                             
                                <category scheme="https://immmmm.com/tags/%E6%8A%98%E8%85%BE" term="%E6%8A%98%E8%85%BE" label="折腾" />
                            
                        
                    
                
            
        </entry>
    
        
        <entry>
            <title type="html"><![CDATA[2020-04-10]]></title>
            <link href="https://immmmm.com/2020-04-10/" rel="alternate" type="text/html" />
            
                <link href="https://immmmm.com/2020-04-04/" rel="related" type="text/html" title="2020-04-04" />
                <link href="https://immmmm.com/2020-03-23/" rel="related" type="text/html" title="2020-03-23" />
                <link href="https://immmmm.com/2020-03-09/" rel="related" type="text/html" title="2020-03-09" />
                <link href="https://immmmm.com/2020-01-14/" rel="related" type="text/html" title="2020-01-14" />
                <link href="https://immmmm.com/2019-12-08/" rel="related" type="text/html" title="2019-12-08" />
            
                <id>https://immmmm.com/2020-04-10/</id>
            
            
            <published>2020-04-10T00:35:24+08:00</published>
            <updated>2020-04-10T00:35:24+08:00</updated>
            
            
            <content type="html"><![CDATA[<p>臭小子，我，相伴一天，无争吵无游戏，明日继续。星期几？几号？几月？谁都没个准。</p>
<p>安心翻书、刷单、听播客，「小宇宙」邀请码：SPAI</p>
<p><del>4ZSJ，8A75</del></p>
<p><del><a href="https://www.cssj.fun/">@北海轻歌</a> 接力分享：NXM6，R4TU，VLJG</del></p>
<p><del>@轻舟 接力分享：NXM6，R4TU，VLJG</del></p>]]></content>
            
                 
                    
                 
                    
                         
                        
                            
                             
                                <category scheme="https://immmmm.com/tags/%E8%AF%8D%E7%A9%B7" term="%E8%AF%8D%E7%A9%B7" label="词穷" />
                            
                        
                    
                
            
        </entry>
    
        
        <entry>
            <title type="html"><![CDATA[Hugo 音乐短代码]]></title>
            <link href="https://immmmm.com/hugo-shortcodes-music/" rel="alternate" type="text/html" />
            
                <link href="https://immmmm.com/hugo-readdir-photos/" rel="related" type="text/html" title="Hugo 添加相册页面" />
                <link href="https://immmmm.com/hugo-shortcodes-article-link/" rel="related" type="text/html" title="Hugo 文章内链优化显示" />
                <link href="https://immmmm.com/use-visual-studio-code/" rel="related" type="text/html" title="VS Code 初体验" />
                <link href="https://immmmm.com/hugo-template-code/" rel="related" type="text/html" title="Hugo 主题常用的代码片段" />
                <link href="https://immmmm.com/hugo-add-breadcrumb/" rel="related" type="text/html" title="Hugo 添加面包屑导航" />
            
                <id>https://immmmm.com/hugo-shortcodes-music/</id>
            
            
            <published>2020-04-09T14:25:00+08:00</published>
            <updated>2020-04-09T14:25:00+08:00</updated>
            
            
            <content type="html"><![CDATA[<p>感谢 <a href="https://hugoloveit.com/zh-cn/theme-documentation-shortcodes/#music">LoveIt</a> 、<a href="https://github.com/metowolf/MetingJS">MetingJS</a> 真方便！</p>
<p>具体源码见：<a href="https://github.com/lmm214/immmmm/blob/master/themes/hello-friend/layouts/shortcodes/music.html">shortcodes/music.html</a>，把这个文件丢入自己的主题文章内插入调用代码即可，已粗暴的把 js 和 css 丢在一起。</p>
<p>效果如下：</p>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">
<style type="text/css">.dark-theme .aplayer{background:#212121}.dark-theme .aplayer.aplayer-withlist .aplayer-info{border-bottom-color:#5c5c5c}.dark-theme .aplayer.aplayer-fixed .aplayer-list{border-color:#5c5c5c}.dark-theme .aplayer .aplayer-body{background-color:#212121}.dark-theme .aplayer .aplayer-info{border-top-color:#212121}.dark-theme .aplayer .aplayer-info .aplayer-music .aplayer-title{color:#fff}.dark-theme .aplayer .aplayer-info .aplayer-music .aplayer-author{color:#fff}.dark-theme .aplayer .aplayer-info .aplayer-controller .aplayer-time{color:#eee}.dark-theme .aplayer .aplayer-info .aplayer-controller .aplayer-time .aplayer-icon path{fill:#eee}.dark-theme .aplayer .aplayer-list{background-color:#212121}.dark-theme .aplayer .aplayer-list::-webkit-scrollbar-thumb{background-color:#999}.dark-theme .aplayer .aplayer-list::-webkit-scrollbar-thumb:hover{background-color:#bbb}.dark-theme .aplayer .aplayer-list li{color:#fff;border-top-color:#666}.dark-theme .aplayer .aplayer-list li:hover{background:#4e4e4e}.dark-theme .aplayer .aplayer-list li.aplayer-list-light{background:#6c6c6c}.dark-theme .aplayer .aplayer-list li .aplayer-list-index{color:#ddd}.dark-theme .aplayer .aplayer-list li .aplayer-list-author{color:#ddd}.dark-theme .aplayer .aplayer-lrc{text-shadow:-1px -1px 0 #666}.dark-theme .aplayer .aplayer-lrc:before{background:-moz-linear-gradient(top, #212121 0%, rgba(33,33,33,0) 100%);background:-webkit-linear-gradient(top, #212121 0%, rgba(33,33,33,0) 100%);background:linear-gradient(to bottom, #212121 0%, rgba(33,33,33,0) 100%);filter:progid:DXImageTransform.Microsoft.gradient( startColorstr='#212121', endColorstr='#00212121',GradientType=0 )}.dark-theme .aplayer .aplayer-lrc:after{background:-moz-linear-gradient(top, rgba(33,33,33,0) 0%, rgba(33,33,33,0.8) 100%);background:-webkit-linear-gradient(top, rgba(33,33,33,0) 0%, rgba(33,33,33,0.8) 100%);background:linear-gradient(to bottom, rgba(33,33,33,0) 0%, rgba(33,33,33,0.8) 100%);filter:progid:DXImageTransform.Microsoft.gradient( startColorstr='#00212121', endColorstr='#cc212121',GradientType=0 )}.dark-theme .aplayer .aplayer-lrc p{color:#fff}.dark-theme .aplayer .aplayer-miniswitcher{background:#484848}.dark-theme .aplayer .aplayer-miniswitcher .aplayer-icon path{fill:#eee}</style>
<script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script><meting-js auto="https://music.163.com/#/playlist?id=60198" theme="#2980b9"></meting-js>]]></content>
            
                 
                    
                 
                    
                         
                        
                            
                             
                                <category scheme="https://immmmm.com/tags/%E6%8A%98%E8%85%BE" term="%E6%8A%98%E8%85%BE" label="折腾" />
                            
                        
                    
                
            
        </entry>
    
        
        <entry>
            <title type="html"><![CDATA[Hugo 添加相册页面]]></title>
            <link href="https://immmmm.com/hugo-readdir-photos/" rel="alternate" type="text/html" />
            
                <link href="https://immmmm.com/hugo-shortcodes-article-link/" rel="related" type="text/html" title="Hugo 文章内链优化显示" />
                <link href="https://immmmm.com/use-visual-studio-code/" rel="related" type="text/html" title="VS Code 初体验" />
                <link href="https://immmmm.com/hugo-template-code/" rel="related" type="text/html" title="Hugo 主题常用的代码片段" />
                <link href="https://immmmm.com/hugo-add-breadcrumb/" rel="related" type="text/html" title="Hugo 添加面包屑导航" />
                <link href="https://immmmm.com/noto-serif-sc-by-google-fonts/" rel="related" type="text/html" title="添加 Google Fonts 思源宋体" />
            
                <id>https://immmmm.com/hugo-readdir-photos/</id>
            
            
            <published>2020-04-06T20:42:02+08:00</published>
            <updated>2020-04-06T20:42:02+08:00</updated>
            
            
            <content type="html"><![CDATA[<p>效果见： <a href="https://immmmm.com/photos/">https://immmmm.com/photos/</a></p>
<p>总有那么一瞬间特别特别想发一张照片，但不是以文章形式发布。</p>
<p>实现思路是程序自动遍历指定文件夹内的图片，并展示在一个页面上。有了思路，剩下的就是看文档、看文档、看文档，此功能利用 Hugo 的 <a href="https://gohugo.io/templates/files/">readDir function</a> 函数达成。</p>
<p>日常更新把图片丢到 <code>static/photos</code> 中即可（搭配 Github Action 自动化部署更香）：</p>
<pre><code>static
└── photos
    ├── 落樱缤纷.jpeg
    ├── 想象中的自由.jpeg
    └── 儿时登过顶的狮子山.jpeg
</code></pre><h3 id="主题集成">主题集成</h3>
<p>如需集成到自己的主题，一般如下操作，但不保证最终结果：</p>
<p>1.<code>static/photos</code> 丢几张命名好的图片先；</p>
<p>2.<code>content/photos.md</code> 创建一个md，好让 Hugo 生成页面；内容如下：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">---
title: &#34;我的相册&#34;
layout: &#34;photos&#34;
---
</code></pre></div><p>3.<code>layouts/_default/photos.html</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">{{ define &#34;main&#34; }}
&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;post&#34;</span>&gt;
  &lt;<span style="color:#f92672">h2</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;post-title&#34;</span>&gt;{{.Title}}&lt;/<span style="color:#f92672">h2</span>&gt;
&lt;/<span style="color:#f92672">div</span>&gt;

&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;page-photos&#34;</span>&gt;
  {{ range (readDir &#34;./static/photos&#34;) }}
  &lt;<span style="color:#f92672">figure</span>&gt;
    &lt;<span style="color:#f92672">img</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;https://cdn.jsdelivr.net/gh/lmm214/immmmm@gh-pages/photos/{{ .Name }}&#34;</span> <span style="color:#a6e22e">alt</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;{{ .Name }}&#34;</span> /&gt;
    &lt;<span style="color:#f92672">figcaption</span>&gt;{{ .Name | replaceRE &#34;(.*)[.].*&#34; &#34;$1&#34;}}&lt;/<span style="color:#f92672">figcaption</span>&gt;
  &lt;/<span style="color:#f92672">figure</span>&gt;
  {{ end }}
&lt;/<span style="color:#f92672">div</span>&gt;
{{ end }}
</code></pre></div><p>图片撸了 jsdelivr CDN 的羊毛，需自行更改，或者指定图片的 src 为本地：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#f92672">img</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;{{&#34;</span><span style="color:#a6e22e">photos</span><span style="color:#960050;background-color:#1e0010">/&#34;</span> <span style="color:#960050;background-color:#1e0010">|</span> <span style="color:#a6e22e">absURL</span> <span style="color:#960050;background-color:#1e0010">}}{{</span> <span style="color:#960050;background-color:#1e0010">.</span><span style="color:#a6e22e">Name</span> <span style="color:#960050;background-color:#1e0010">}}&#34;</span> <span style="color:#a6e22e">alt</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;{{ .Name }}&#34;</span> /&gt;
</code></pre></div><p>4.样式参考：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-css" data-lang="css">.<span style="color:#a6e22e">page-photos</span> <span style="color:#f92672">figure</span>{<span style="color:#66d9ef">max-width</span>:<span style="color:#ae81ff">80</span><span style="color:#66d9ef">%</span>;<span style="color:#66d9ef">margin</span>:<span style="color:#ae81ff">0</span> <span style="color:#66d9ef">auto</span> <span style="color:#ae81ff">3</span><span style="color:#66d9ef">rem</span>;}
.<span style="color:#a6e22e">page-photos</span> <span style="color:#f92672">figure</span> <span style="color:#f92672">img</span>{<span style="color:#66d9ef">box-shadow</span>: <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">12</span><span style="color:#66d9ef">px</span> <span style="color:#ae81ff">40</span><span style="color:#66d9ef">px</span> rgba(<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">.15</span>);<span style="color:#66d9ef">border-radius</span>: <span style="color:#ae81ff">8</span><span style="color:#66d9ef">px</span>;}
</code></pre></div><h3 id="不了了之">不了了之</h3>
<p>原依据 <a href="https://golang.org/pkg/os/#FileInfo">os.FileInfo</a> 还加了 <code>{{ .Modtime }}</code> 时间显示，本地测试都可以，但同步到线上之后所有图片都一个时间，了之。</p>]]></content>
            
                 
                    
                 
                    
                         
                        
                            
                             
                                <category scheme="https://immmmm.com/tags/%E6%8A%98%E8%85%BE" term="%E6%8A%98%E8%85%BE" label="折腾" />
                            
                        
                    
                
            
        </entry>
    
</feed>
