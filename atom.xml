<?xml version="1.0" encoding="utf-8"?> 
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="zh-CN">
    <generator uri="https://gohugo.io/" version="0.68.1">Hugo</generator><title type="html"><![CDATA[木木木木木]]></title>
    
    
    
            <link href="https://immmmm.com/atom.xml" rel="self" type="application/rss+xml" title="atom" />
            <link href="https://immmmm.com/" rel="alternate" type="text/html" title="HTML" />
            <link href="https://immmmm.com/index.json" rel="alternate" type="application/json" title="JSON" />
    <updated>2020-03-23T07:24:35+00:00</updated>
    
    
    
    
        <id>https://immmmm.com/atom.xml</id>
    
        
        <entry>
            <title type="html"><![CDATA[2020-03-23]]></title>
            <link href="https://immmmm.com/2020-03-23/" rel="alternate" type="text/html" />
            
                <link href="https://immmmm.com/2020-03-09/" rel="related" type="text/html" title="2020-03-09" />
                <link href="https://immmmm.com/2020-01-14/" rel="related" type="text/html" title="2020-01-14" />
                <link href="https://immmmm.com/2019-12-08/" rel="related" type="text/html" title="2019-12-08" />
                <link href="https://immmmm.com/2019-12-01/" rel="related" type="text/html" title="2019-12-01" />
                <link href="https://immmmm.com/2019-11-23/" rel="related" type="text/html" title="2019-11-23" />
            
                <id>https://immmmm.com/2020-03-23/</id>
            
            
            <published>2020-03-23T00:00:00+00:00</published>
            <updated>2020-03-23T00:00:00+00:00</updated>
            
            
            <content type="html"><![CDATA[<p>喜大普奔，市官宣 **“全面恢复生产生活秩序”**❗️ 自家小区已解禁，商场全部正常营业，餐饮也全部支持堂食。真是 <strong>“忽如一夜春风来，千树万树梨花开。”</strong></p>
]]></content>
            
                 
                    
                 
                    
                         
                        
                            
                             
                                <category scheme="https://immmmm.com/tags/%E8%AF%8D%E7%A9%B7" term="%E8%AF%8D%E7%A9%B7" label="词穷" />
                            
                        
                    
                
            
        </entry>
    
        
        <entry>
            <title type="html"><![CDATA[Valine 懒加载]]></title>
            <link href="https://immmmm.com/valine-getscript-load/" rel="alternate" type="text/html" />
            
            
                <id>https://immmmm.com/valine-getscript-load/</id>
            
            
            <published>2020-03-23T00:00:00+00:00</published>
            <updated>2020-03-23T00:00:00+00:00</updated>
            
            
            <content type="html"><![CDATA[<p>博客都已静态，想再提速，要么换国内云服，要么优化一个个 JS 加载。立竿见影办法是使用 CDN 来加载，或者前端延迟加载，甚者后端判断按需加载。</p>
<p>在需要加载的一串 JS 里，找来找去，Valine 这货最强大 💪</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">47.5KB --&gt; https://cdn.jsdelivr.net/npm/leancloud-storage/dist/av-min.js
75KB   --&gt; https://cdn.jsdelivr.net/npm/valine@1.3.10/dist/Valine.min.js
6.4KB  --&gt; https://js.fundebug.cn/fundebug.1.9.0.min.js
</code></pre></div><p>撸起袖子，月干！</p>
<p>代码来自：<a href="https://github.com/reuixiy/hugo-theme-meme/blob/master/layouts/partials/third-party/valine.html">hugo-theme-meme/valine.html</a>，好使！ 👍</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#f92672">&lt;</span><span style="color:#a6e22e">script</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text/javascript&#34;</span><span style="color:#f92672">&gt;</span>
<span style="color:#a6e22e">loadComments</span>();
<span style="color:#66d9ef">function</span> <span style="color:#a6e22e">loadComments</span>() {
  <span style="color:#66d9ef">if</span> (<span style="color:#66d9ef">typeof</span> <span style="color:#a6e22e">Valine</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;undefined&#39;</span>) {
    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">getScript</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">options</span>) =&gt; {
      <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">script</span> <span style="color:#f92672">=</span> document.<span style="color:#a6e22e">createElement</span>(<span style="color:#e6db74">&#39;script&#39;</span>);
      <span style="color:#a6e22e">script</span>.<span style="color:#a6e22e">defer</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span>;
      <span style="color:#a6e22e">script</span>.<span style="color:#a6e22e">crossOrigin</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;anonymous&#39;</span>;
      Object.<span style="color:#a6e22e">keys</span>(<span style="color:#a6e22e">options</span>).<span style="color:#a6e22e">forEach</span>((<span style="color:#a6e22e">key</span>) =&gt; {
          <span style="color:#a6e22e">script</span>[<span style="color:#a6e22e">key</span>] <span style="color:#f92672">=</span> <span style="color:#a6e22e">options</span>[<span style="color:#a6e22e">key</span>];
      });
      document.<span style="color:#a6e22e">body</span>.<span style="color:#a6e22e">appendChild</span>(<span style="color:#a6e22e">script</span>);
    };
    <span style="color:#a6e22e">getScript</span>({
      <span style="color:#a6e22e">src</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;https://cdn.jsdelivr.net/npm/valine@1.3.10/dist/Valine.min.js&#39;</span>,
      <span style="color:#a6e22e">onload</span><span style="color:#f92672">:</span> () =&gt; {
        <span style="color:#a6e22e">newValine</span>();
      }
    });
  } <span style="color:#66d9ef">else</span> {
    <span style="color:#a6e22e">newValine</span>();
  }
}
<span style="color:#66d9ef">function</span> <span style="color:#a6e22e">newValine</span>() {
  <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Valine</span>({
    <span style="color:#75715e">//原配置
</span><span style="color:#75715e"></span>  });
}
<span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/script&gt;</span>
</code></pre></div><p>🎉</p>]]></content>
            
                 
                    
                 
                    
                
            
        </entry>
    
        
        <entry>
            <title type="html"><![CDATA[Hello Hugo]]></title>
            <link href="https://immmmm.com/hello-hugo/" rel="alternate" type="text/html" />
            
                <link href="https://immmmm.com/rsshub-docker/" rel="related" type="text/html" title="RSSHub 部署笔记" />
                <link href="https://immmmm.com/hugo-github-actions/" rel="related" type="text/html" title="Hugo &#43; Github Actions 实现自动化部署" />
                <link href="https://immmmm.com/post-show-douban-item-localstorage-cache/" rel="related" type="text/html" title="文章内显示豆瓣条目（LocalStorage 缓存版）" />
                <link href="https://immmmm.com/gridea-theme-motify/" rel="related" type="text/html" title="Gridea Theme Motify" />
                <link href="https://immmmm.com/jsdelivr-gridea/" rel="related" type="text/html" title="使用 jsDelivr 加速 Gridea" />
            
                <id>https://immmmm.com/hello-hugo/</id>
            
            
            <published>2020-03-21T00:00:00+00:00</published>
            <updated>2020-03-21T00:00:00+00:00</updated>
            
            
            <content type="html"><![CDATA[<p>哈喽，🐯🐶！（开机声～）</p>
<p><img src="https://lmm.elizen.me/images/2020/03/hugo-2.png" alt="hugo-2"></p>
<p>主站顺利切换到 <a href="https://gohugo.io/">Hugo</a> ，直接在 Github Web 端码字，或者本地码好拖进去，自动更新，自动部署，舒心！</p>
<p>就待它的 Github APP 端支持编辑代码咯！</p>
<h3 id="迁移采坑记">迁移采坑记</h3>
<h4 id="文章摘要失效">文章摘要失效</h4>
<p>原来文章 <code>more</code> 标签像中间有空格就无效 <code>&lt;!--  more  --&gt;</code> 批量替换成  <code>&lt;!--more--&gt;</code> 解决。</p>
<h4 id="文章列表排序错乱">文章列表排序错乱</h4>
<p>原来是文章信息的 <code>date</code> 格式不统一导致无法识别，统一修改为年月日 <code>date: 2020-03-21</code> 解决。</p>
<h4 id="文章内-html-标签为空">文章内 html 标签为空</h4>
<p>被替换为 <code>&lt;!-- raw HTML omitted --&gt;</code> ，原来 Hugo 0.60 以上默认禁用了，手动在 <code>config.toml</code> 添加以下代码。</p>
<pre><code>[markup]
[markup.goldmark]
[markup.goldmark.renderer]
  unsafe = true
</code></pre><h3 id="瞎折腾导引">瞎折腾导引</h3>
<p>强烈推荐一波流，文章 TOC 目录、面包屑导航、URL 无缝迁移、内置搜索等 ➡️ <a href="https://www.rectcircle.cn/posts/blog-migration/">博客迁移——Hugo使用整体概览</a></p>
<p>瞎改后的主题源码见 <a href="https://github.com/lmm214/immmmm/tree/master/themes/hello-friend">「这里」</a></p>
<h4 id="更改默认-rss-地址">更改默认 RSS 地址</h4>
<p>原默认 rss 地址是 <code>index.xml</code>：什么鬼！下载 <a href="https://github.com/kaushalmodi/hugo-atom-feed/blob/master/layouts/_default/list.atom.xml">list.atom.xml</a> 丢入自己主题的 <code>layouts/_default</code>, 并在 <code>config.toml</code> 添加以下代码。</p>
<pre><code>rssLimit = 5 # 控制输出数量，不然默认是全站
[outputs]
  home = [&quot;Atom&quot;, &quot;HTML&quot;] # &lt;domain&gt;/atom.xml
[outputFormats.Atom]
  mediatype = &quot;application/rss&quot;
  baseName = &quot;atom&quot;
</code></pre><h4 id="增加文章-toc">增加文章 TOC</h4>
<p>新建 <a href="https://github.com/lmm214/immmmm/blob/master/themes/hello-friend/layouts/partials/toc.html">layouts/partials/toc.html</a> ，修改 <a href="https://github.com/lmm214/immmmm/blob/master/themes/hello-friend/layouts/_default/single.html">layouts/_default/single.html</a> 添加引用代码：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">    {{ if .Params.toc }}
      &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;tocify&#34;</span>&gt;目录：{{- partial &#34;toc.html&#34; . -}}&lt;/<span style="color:#f92672">div</span>&gt;
    {{ end }}
</code></pre></div><p>在文章 md 头部信息中添加 <code>toc: true</code> 启用。相关 CSS 和 jQuery 代码如下：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-css" data-lang="css"><span style="color:#75715e">/* tocify */</span>
.<span style="color:#a6e22e">tocify</span> {<span style="color:#66d9ef">width</span>: <span style="color:#ae81ff">20</span><span style="color:#66d9ef">%</span>; <span style="color:#66d9ef">max-height</span>: <span style="color:#ae81ff">90</span><span style="color:#66d9ef">%</span>; <span style="color:#66d9ef">overflow</span>: <span style="color:#66d9ef">auto</span>; <span style="color:#66d9ef">margin-left</span>: <span style="color:#ae81ff">2</span><span style="color:#66d9ef">%</span>; <span style="color:#66d9ef">position</span>: <span style="color:#66d9ef">absolute</span>; <span style="color:#66d9ef">right</span>:<span style="color:#ae81ff">2</span><span style="color:#66d9ef">%</span>; <span style="color:#66d9ef">border-radius</span>: <span style="color:#ae81ff">6</span><span style="color:#66d9ef">px</span>;}
.<span style="color:#a6e22e">tocify</span> <span style="color:#f92672">ul</span><span style="color:#f92672">,</span> .<span style="color:#a6e22e">tocify</span> <span style="color:#f92672">li</span> {<span style="color:#66d9ef">list-style</span>: <span style="color:#66d9ef">none</span>; <span style="color:#66d9ef">margin</span>: <span style="color:#ae81ff">0</span>; <span style="color:#66d9ef">padding</span>: <span style="color:#ae81ff">0</span>; <span style="color:#66d9ef">border</span>: <span style="color:#66d9ef">none</span>; <span style="color:#66d9ef">line-height</span>: <span style="color:#ae81ff">30</span><span style="color:#66d9ef">px</span>; }
.<span style="color:#a6e22e">tocify</span> <span style="color:#f92672">li</span> <span style="color:#f92672">a</span> {<span style="color:#66d9ef">display</span>: <span style="color:#66d9ef">inline</span><span style="color:#f92672">-</span><span style="color:#66d9ef">block</span>; <span style="color:#66d9ef">text-indent</span>:<span style="color:#ae81ff">10</span><span style="color:#66d9ef">px</span>; <span style="color:#66d9ef">font-size</span>: <span style="color:#ae81ff">14</span><span style="color:#66d9ef">px</span>; <span style="color:#66d9ef">text-decoration</span>: <span style="color:#66d9ef">none</span>; }
.<span style="color:#a6e22e">tocify</span> <span style="color:#f92672">ul</span> <span style="color:#f92672">ul</span> <span style="color:#f92672">li</span> <span style="color:#f92672">a</span>:<span style="color:#a6e22e">before</span> {<span style="color:#66d9ef">content</span>: <span style="color:#e6db74">&#34;- &#34;</span>}
@<span style="color:#66d9ef">media</span> <span style="color:#f92672">only</span> <span style="color:#f92672">screen</span> <span style="color:#f92672">and</span> <span style="color:#f92672">(</span><span style="color:#f92672">max-width</span>:<span style="color:#a6e22e">683px</span><span style="color:#f92672">)</span> {
	.<span style="color:#a6e22e">tocify</span> {<span style="color:#66d9ef">display</span>: <span style="color:#66d9ef">none</span>;}
}
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#75715e">//文章 toc 跟随
</span><span style="color:#75715e"></span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">nav</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">$</span>(<span style="color:#e6db74">&#34;.tocify&#34;</span>);
<span style="color:#a6e22e">nav</span>.<span style="color:#a6e22e">removeClass</span>(<span style="color:#e6db74">&#34;hide&#34;</span>);
<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">navTop</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">$</span>(<span style="color:#e6db74">&#34;.post-content&#34;</span>).<span style="color:#a6e22e">offset</span>().<span style="color:#a6e22e">top</span>;
<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">w</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">$</span>(window).<span style="color:#a6e22e">width</span>()<span style="color:#f92672">/</span><span style="color:#ae81ff">2</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">400</span>;
<span style="color:#a6e22e">nav</span>.<span style="color:#a6e22e">css</span>(<span style="color:#e6db74">&#34;left&#34;</span>, <span style="color:#a6e22e">w</span>);
<span style="color:#a6e22e">nav</span>.<span style="color:#a6e22e">css</span>(<span style="color:#e6db74">&#34;top&#34;</span>, <span style="color:#a6e22e">navTop</span>);
<span style="color:#a6e22e">$</span>(window).<span style="color:#a6e22e">scroll</span>(<span style="color:#66d9ef">function</span>() {
    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">scrolls</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">$</span>(<span style="color:#66d9ef">this</span>).<span style="color:#a6e22e">scrollTop</span>();
    <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">scrolls</span> <span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">navTop</span>) {
      <span style="color:#a6e22e">nav</span>.<span style="color:#a6e22e">css</span>({<span style="color:#e6db74">&#34;top&#34;</span><span style="color:#f92672">:</span><span style="color:#ae81ff">0</span>,<span style="color:#e6db74">&#34;position&#34;</span><span style="color:#f92672">:</span><span style="color:#e6db74">&#34;fixed&#34;</span>});
    } <span style="color:#66d9ef">else</span> {
      <span style="color:#a6e22e">nav</span>.<span style="color:#a6e22e">css</span>({<span style="color:#e6db74">&#34;top&#34;</span><span style="color:#f92672">:</span><span style="color:#a6e22e">navTop</span>,<span style="color:#e6db74">&#34;position&#34;</span><span style="color:#f92672">:</span><span style="color:#e6db74">&#34;absolute&#34;</span>});
    };
});
</code></pre></div><h4 id="添加豆瓣页面">添加豆瓣页面</h4>
<p>新建模板 <a href="https://github.com/lmm214/immmmm/blob/master/themes/hello-friend/layouts/_default/books.html">layouts/_default/books.html</a> 、<a href="https://github.com/lmm214/immmmm/blob/master/themes/hello-friend/layouts/_default/movies.html">layouts/_default/movies.html</a> 页面模板，自行修改 <code>secret</code>。</p>
<p>新建文章 <a href="https://github.com/lmm214/immmmm/blob/master/content/books.md">content/books.md</a>、<a href="https://github.com/lmm214/immmmm/blob/master/content/movies.md">content/movies.md</a> ，当访问 <code>域名/books/</code> 时 Hugo 会匹配 <code>books.html</code> 进行渲染。</p>
<h4 id="实现内置搜索">实现内置搜索</h4>
<p>敲黑板，记得写个文章md， <a href="https://github.com/lmm214/immmmm/blob/master/content/search.md">content/search.md</a> 丢入 <code>content</code> 中用来渲染空目录。</p>
<p>搜索利用的是 <code>fuse.js</code> 实现前端搜索全站文章 json 数据。</p>
<p><code>config.toml</code> 添加合并：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">[outputs]
  home = [&#34;Atom&#34;, &#34;HTML&#34;, &#34;JSON&#34;] #加上 JSON 支持
</code></pre></div><p>新建 <a href="https://github.com/lmm214/immmmm/blob/master/themes/hello-friend/layouts/index.json">layouts/index.json</a> ,新建搜索模板 <a href="https://github.com/lmm214/immmmm/blob/master/themes/hello-friend/layouts/_default/search.html">layouts/_default/search.html</a> ，新建搜索 JS <a href="https://github.com/lmm214/immmmm/blob/master/themes/hello-friend/static/search.js">static/search.js</a> ,添加搜索 CSS：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-css" data-lang="css"><span style="color:#75715e">/* searchBoxInput */</span>
.<span style="color:#a6e22e">menu</span> .<span style="color:#a6e22e">search-box-icon</span> {<span style="color:#66d9ef">margin-top</span>: <span style="color:#ae81ff">11</span><span style="color:#66d9ef">px</span>; }
.<span style="color:#a6e22e">searchPage</span>{<span style="color:#66d9ef">min-height</span>:<span style="color:#ae81ff">300</span><span style="color:#66d9ef">px</span>}
.<span style="color:#a6e22e">search-box</span> {<span style="color:#66d9ef">position</span>: <span style="color:#66d9ef">relative</span>; <span style="color:#66d9ef">margin-bottom</span>: <span style="color:#ae81ff">20</span><span style="color:#66d9ef">px</span>; } #searchBoxInput {<span style="color:#66d9ef">padding</span>: <span style="color:#ae81ff">0.5</span><span style="color:#66d9ef">rem</span> <span style="color:#ae81ff">2</span><span style="color:#66d9ef">rem</span> <span style="color:#ae81ff">0.5</span><span style="color:#66d9ef">rem</span> <span style="color:#ae81ff">1</span><span style="color:#66d9ef">rem</span>; <span style="color:#66d9ef">width</span>: <span style="color:#ae81ff">16</span><span style="color:#66d9ef">rem</span>; <span style="color:#66d9ef">background</span>:<span style="color:#ae81ff">#eaeaea</span>; <span style="color:#66d9ef">border-radius</span>: <span style="color:#ae81ff">1</span><span style="color:#66d9ef">rem</span>; <span style="color:#66d9ef">outline</span>: <span style="color:#ae81ff">0</span>; <span style="color:#66d9ef">font-size</span>: <span style="color:#ae81ff">1</span><span style="color:#66d9ef">rem</span>; <span style="color:#66d9ef">color</span>: <span style="color:#66d9ef">inherit</span>; <span style="color:#66d9ef">border</span>: <span style="color:#ae81ff">0</span><span style="color:#66d9ef">px</span>; <span style="color:#66d9ef">box-sizing</span>: <span style="color:#66d9ef">border-box</span>; }
.<span style="color:#a6e22e">dark-theme</span> .<span style="color:#a6e22e">search-box</span> #searchBoxInput {<span style="color:#66d9ef">background</span>: <span style="color:#ae81ff">#3b3d42</span>; }
#searchBoxButton {<span style="color:#66d9ef">display</span>: <span style="color:#66d9ef">inline</span>; <span style="color:#66d9ef">background</span>: <span style="color:#66d9ef">none</span>; <span style="color:#66d9ef">margin</span>: <span style="color:#ae81ff">0</span><span style="color:#66d9ef">rem</span>; <span style="color:#66d9ef">border</span>:<span style="color:#ae81ff">0</span> <span style="color:#66d9ef">none</span>; <span style="color:#66d9ef">border-radius</span>: <span style="color:#ae81ff">0</span>; <span style="color:#66d9ef">padding</span>: <span style="color:#ae81ff">0.4</span><span style="color:#66d9ef">rem</span> <span style="color:#ae81ff">0.6</span><span style="color:#66d9ef">rem</span> <span style="color:#ae81ff">0.4</span><span style="color:#66d9ef">rem</span>; }
.<span style="color:#a6e22e">search-box-icon</span> {<span style="color:#66d9ef">color</span>: <span style="color:#66d9ef">inherit</span>; fill: <span style="color:#66d9ef">currentColor</span>; <span style="color:#66d9ef">width</span>: <span style="color:#ae81ff">1.1</span><span style="color:#66d9ef">rem</span>; <span style="color:#66d9ef">height</span>: <span style="color:#ae81ff">1.1</span><span style="color:#66d9ef">rem</span>; }
</code></pre></div><h4 id="匹配-valine-暗黑样式">匹配 Valine 暗黑样式</h4>
<p>使用 <code>Valine.Pure.min.js</code> 不带默认样式的，并添加暗黑代码（完整版 <a href="https://github.com/lmm214/immmmm/blob/master/themes/hello-friend/static/style.css">style.css</a>）：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-css" data-lang="css">.<span style="color:#a6e22e">dark-theme</span> .<span style="color:#a6e22e">v</span> .<span style="color:#a6e22e">vwrap</span>{<span style="color:#66d9ef">border</span>:<span style="color:#ae81ff">1</span><span style="color:#66d9ef">px</span> <span style="color:#66d9ef">solid</span> <span style="color:#ae81ff">#4a4b50</span>;}
.<span style="color:#a6e22e">dark-theme</span> .<span style="color:#a6e22e">v</span> .<span style="color:#a6e22e">vwrap</span> <span style="color:#f92672">input</span>{<span style="color:#66d9ef">background</span>:<span style="color:#ae81ff">#dcdcdc</span>;}
.<span style="color:#a6e22e">dark-theme</span> .<span style="color:#a6e22e">v</span> .<span style="color:#a6e22e">veditor</span>{<span style="color:#66d9ef">color</span>:<span style="color:#ae81ff">#fff</span>;}
.<span style="color:#a6e22e">dark-theme</span> .<span style="color:#a6e22e">v</span> .<span style="color:#a6e22e">vbtn</span>{<span style="color:#66d9ef">color</span>:<span style="color:#ae81ff">#dcdcdc</span>;<span style="color:#66d9ef">background</span>:<span style="color:#ae81ff">#4a4b50</span>;}
</code></pre></div><h3 id="感叹和感谢">感叹和感谢</h3>
<p>不懂英文，太难了！ 懂点英文，但也看不懂官方文档，😭</p>
<ul>
<li>中文系列教程翻译： <a href="https://www.rectcircle.cn/series/hugo/">https://www.rectcircle.cn/series/hugo/</a></li>
<li>Hugo 中文帮助文档：<a href="https://hugo.aiaide.com/">https://hugo.aiaide.com/</a></li>
<li>官方 Hugo Templates： <a href="https://gohugo.io/templates/">https://gohugo.io/templates/</a></li>
</ul>]]></content>
            
                 
                    
                 
                    
                         
                        
                            
                             
                                <category scheme="https://immmmm.com/tags/%E6%8A%98%E8%85%BE" term="%E6%8A%98%E8%85%BE" label="折腾" />
                            
                        
                    
                
            
        </entry>
    
        
        <entry>
            <title type="html"><![CDATA[RSSHub 部署笔记]]></title>
            <link href="https://immmmm.com/rsshub-docker/" rel="alternate" type="text/html" />
            
                <link href="https://immmmm.com/hello-hugo/" rel="related" type="text/html" title="Hello Hugo" />
                <link href="https://immmmm.com/hugo-github-actions/" rel="related" type="text/html" title="Hugo &#43; Github Actions 实现自动化部署" />
                <link href="https://immmmm.com/post-show-douban-item-localstorage-cache/" rel="related" type="text/html" title="文章内显示豆瓣条目（LocalStorage 缓存版）" />
                <link href="https://immmmm.com/gridea-theme-motify/" rel="related" type="text/html" title="Gridea Theme Motify" />
                <link href="https://immmmm.com/jsdelivr-gridea/" rel="related" type="text/html" title="使用 jsDelivr 加速 Gridea" />
            
                <id>https://immmmm.com/rsshub-docker/</id>
            
            
            <published>2020-03-21T00:00:00+00:00</published>
            <updated>2020-03-21T00:00:00+00:00</updated>
            
            
            <content type="html"><![CDATA[<blockquote>
<p>🍰 万物皆可 RSS。</p>
</blockquote>
<p>内容来源：<a href="https://docs.rsshub.app/install/#an-zhuang-2">https://docs.rsshub.app/install/#an-zhuang-2</a></p>
<pre><code>$ docker pull diygod/rsshub
$ docker run -d --name rsshub -p 1200:1200 diygod/rsshub
</code></pre><p>用宝塔面板的话，放行 1200 端口。浏览器打开 http://IP:1200/ ，看到成功页面。✅</p>
<h3 id="绑定域名">绑定域名</h3>
<p><img src="https://lmm.elizen.me/images/2020/03/rsshub.png" alt="rsshub"></p>
<p>每次 IP 总不方便，子域名绑起，后台添加网址，加一个「理代向反」即可。</p>
<h3 id="使用指北">使用指北</h3>
<p><img src="https://lmm.elizen.me/images/2020/03/rsshub-1.jpg" alt="rsshub-1"></p>
<p>配合 chrome 扩展更方便：<a href="https://chrome.google.com/webstore/detail/rsshub-radar/kefjpfngnndepjbopdmoebkipbgkggaa">RSSHub Radar</a> ，自定义域名，随时查询规则！</p>
<p>再配合 <a href="https://immmmm.com/telegram-flowerss-bot/">《电报 Flowerss Bot》</a>，开启私属 rss 聚合机器人！</p>]]></content>
            
                 
                    
                 
                    
                         
                        
                            
                             
                                <category scheme="https://immmmm.com/tags/%E6%8A%98%E8%85%BE" term="%E6%8A%98%E8%85%BE" label="折腾" />
                            
                        
                    
                
            
        </entry>
    
        
        <entry>
            <title type="html"><![CDATA[Hugo + Github Actions 实现自动化部署]]></title>
            <link href="https://immmmm.com/hugo-github-actions/" rel="alternate" type="text/html" />
            
                <link href="https://immmmm.com/post-show-douban-item-localstorage-cache/" rel="related" type="text/html" title="文章内显示豆瓣条目（LocalStorage 缓存版）" />
                <link href="https://immmmm.com/gridea-theme-motify/" rel="related" type="text/html" title="Gridea Theme Motify" />
                <link href="https://immmmm.com/jsdelivr-gridea/" rel="related" type="text/html" title="使用 jsDelivr 加速 Gridea" />
                <link href="https://immmmm.com/jinrishici-with-valine/" rel="related" type="text/html" title="今日诗词 &amp; Valine" />
                <link href="https://immmmm.com/valine-show-comment-views/" rel="related" type="text/html" title="Valine 文章列表显示评论数和阅读数" />
            
                <id>https://immmmm.com/hugo-github-actions/</id>
            
            
            <published>2020-03-19T00:00:00+00:00</published>
            <updated>2020-03-19T00:00:00+00:00</updated>
            
            
            <content type="html"><![CDATA[<p>不折腾点东西总觉得浑浑噩噩，折腾点东西搞得脑袋晕晕乎乎！</p>
<h3 id="折腾需求">折腾需求</h3>
<p>为更新 <a href="https://edui.fun/">https://edui.fun/</a> 导航站能随手些，造了 <a href="https://immmmm.com/gridea-theme-webstack/">Gridea Theme WebStack</a> 。每次得源文件切换加载，但只为加几行代码，等等等；</p>
<p>折腾一天，已实现直接在 GitHub  <code>master</code> 添加代码，<code>Github Actions </code> 自动构建 <code>Hugo</code> 静态文件到 <code>gh-pages</code> 分支，外加同步 webhook 到自己的服务器。</p>
<p>再也不用 git 来 git 去！</p>
<h3 id="上传-hugo-源文件">上传 Hugo 源文件</h3>
<p>（注：如已把 Hugo 程序 push 到 GitHub 上，直接跳过看下一步。）</p>
<p>点击下载：<a href="https://github.com/lmm214/edui/archive/master.zip">https://github.com/lmm214/edui/archive/master.zip</a></p>
<p>GitHub 上新建一个 repo，并只需保留以下文件上传到 <code>master</code> ，同时随手建个 <code>gh-pages</code> 分支：</p>
<pre><code>├── archetypes
│   └── default.md
├── config.toml  //Hugo 程序配置文件
├── content
│   ├── about.md
├── data
│   └── links.toml //导航数据，一个文件搞定
└── themes
    └── webstack  //Hugo 主题
        ├── layouts
        │   └── home.html  //主页
        └── theme.toml  //主题配置文件
</code></pre><h3 id="添加-github-actions-代码">添加 Github Actions 代码：</h3>
<p>实现效果，直接网页上修改 <code>data/links.toml</code> 或任意文件，触发 Actions 自动化运行 Hugo 程序生成静态文件并推送到 <code>gh-pages</code> 分支上，等待几十秒可看到更新 <a href="https://lmm214.github.io/edui/">https://lmm214.github.io/edui/</a></p>
<p>具体操作：</p>
<ul>
<li>
<p>点 <a href="https://github.com/settings/tokens">https://github.com/settings/tokens</a> 新建一个，并暂存；进项目 <code>settings/secrets</code> 新建标题为 <code>personal_token</code> ，内容是刚创建的 <code>tokens</code> ;</p>
</li>
<li>
<p>回项目，点 <code>Actions -- New wordflow -- Set up a workflow yourself</code> ，添加如下代码：</p>
</li>
</ul>
<pre><code>name: Deploy Hugo # 任君喜欢

on:
  push:
    branches:
      - master   # master 更新触发

jobs:
  build-deploy:
    runs-on: ubuntu-18.04
    steps:
      - uses: actions/checkout@v1

      - name: Setup Hugo
        uses: peaceiris/actions-hugo@v2
        with:
          hugo-version: latest

      - name: Build 
        run: hugo

      - name: Deploy
        uses: peaceiris/actions-gh-pages@v3
        with:
          personal_token: ${{ secrets.personal_token }} # personal_token 这里新建一个 https://github.com/settings/tokens
          PUBLISH_BRANCH: gh-pages  # 推送到当前 gh-pages 分支
          PUBLISH_DIR: ./public  # hugo 生成到 public 作为跟目录
          commit_message: ${{ github.event.head_commit.message }}
</code></pre><p>👌 等，3、2、1，看看 <code>Actions</code> 顺利不，再看看 <code>gh-pages</code> 静态文件更新了不，最终打开 Pages ，祝贺！</p>
<p>日志？主题？统统 GitHub 网页端搞定！当然，调试主题什么的还是建议本地进行。</p>
<h3 id="同步到服务器">同步到服务器</h3>
<p>完整源文件 <a href="https://github.com/lmm214/edui/blob/master/.github/workflows/main.yml">【这里】</a> ，还有一段代码，实现同步推送到自己的服务器。</p>
<pre><code>      - name: Webhook
        uses: distributhor/workflow-webhook@v1
        env:
          webhook_url: ${{ secrets.WEBHOOK_URL }}
          webhook_secret: ${{ secrets.WEBHOOK_SECRET }}
</code></pre><p><code>WEBHOOK_URL</code> 和 <code>WEBHOOK_SECRET</code> 是进项目 <code>settings/secrets</code> 新建添加，构建成宝塔面板的 webhook 链接，同时宝塔后台的代码去掉后缀判断。</p>
<h3 id="后话一点点-">后话一点点 🤏</h3>
<p>听闻 Hugo 大名也有好几个月，一直没尝试，之后也沉浸在 Gridea 中，不得不夸夸 Gridea 客户端体检真是优雅！</p>
<p>但一直有一点点遗憾，更新只能启动客户端，点击【同步】。</p>
<p>而 Hugo 生成静态文件摔 Hexo 几光年，部署安装无依赖，试用门槛较低。看着官方文档，程序、主题自定义也比较强悍。</p>
<p>搜遍全网教程，要不就是太详细，一长串代码加注释，供大于求，要不略过。幸好，也算折腾成功！ ✌️</p>
<h3 id="感谢">感谢</h3>
<ul>
<li>官方 Hugo Templates： <a href="https://gohugo.io/templates/">https://gohugo.io/templates/</a></li>
<li>中文系列教程翻译： <a href="https://www.rectcircle.cn/series/hugo/">https://www.rectcircle.cn/series/hugo/</a></li>
<li>Hugo 中文帮助文档：<a href="https://hugo.aiaide.com/">https://hugo.aiaide.com/</a></li>
</ul>]]></content>
            
                 
                    
                 
                    
                         
                        
                            
                             
                                <category scheme="https://immmmm.com/tags/%E6%8A%98%E8%85%BE" term="%E6%8A%98%E8%85%BE" label="折腾" />
                            
                        
                    
                
            
        </entry>
    
</feed>
